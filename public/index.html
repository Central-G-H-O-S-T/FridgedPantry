<html lang="en">
    <body>
        <button hidden id="signUp" onclick="showSignUp()"><h1>Sign Up</h1></button>
        <div hidden id="signUpSection">
            Email: <input type="email" name="email" id="createEmail">
            <br/>
            Password: <input type="password" name="password" id="createPassword">
            <input type="submit" value="Submit" id="signUpBtn">
        </div>
        <br/><br/>
        
        <button hidden id="logIn" onclick="showLogIn()"><h1>Log In</h1></button>
        <div hidden id="logInSection">
            Email: <input type="email" name="email" id="userEmail">
            <br/>
            Password: <input type="password" name="password" id="userPassword">
            <input type="submit" value="Submit" id="logInBtn">
        </div>
        
        <button hidden id="logOut" onclick="logOut()"><h1>Log Out</h1></button>
            
        
        <script src="https://www.gstatic.com/firebasejs/4.8.0/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-auth.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyC6QJIfDeGx4PoQbVMRysUXeswfaCr4AEo",
                authDomain: "hackthenorthproject-390b9.firebaseapp.com",
                databaseURL: "https://hackthenorthproject-390b9.firebaseio.com",
                projectId: "hackthenorthproject-390b9",
                storageBucket: "hackthenorthproject-390b9.appspot.com",
                messagingSenderId: "542605497175"
            };
            firebase.initializeApp(config);
            
            
           //Sign up
            document.getElementById("signUpBtn").addEventListener('click', e=>{
                const email = document.getElementById("createEmail").value;
                const password = document.getElementById("createPassword").value;
                firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    if (errorCode === 'auth/email-already-in-use') {
                        alert('Email currently in use');
                      } 
                    else if (errorCode === 'auth/invalid-email') {
                        alert('Email invalid');
                      }
                    else if (errorCode === 'auth/weak-password') {
                        alert('Password too weak');
                      }
                    else {
                        alert(errorMessage);
                      }
                    console.log(error);
                });
                //location.reload(true);
            });
            
            //Log in
            document.getElementById("logInBtn").addEventListener('click', e=>{
                const email = document.getElementById("userEmail").value;
                const password = document.getElementById("userPassword").value;
                
                firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
                  var errorCode = error.code;
                  var errorMessage = error.message;
                    if (errorCode === 'auth/wrong-password' || errorCode == 'auth/user-not-found') {
                        alert('Incorrect email/password.');
                      } else {
                        alert(errorMessage);
                      }
                    
                });
                //location.reload(true);
            });
            
            window.onload = function() {
                firebase.auth().onAuthStateChanged(function(user) {
                    if (user) {
                       alert("hello");
                             document.getElementById("signUp").setAttribute('hidden', 'true'); 
                        document.getElementById("logIn").setAttribute('hidden', 'true');document.getElementById("logOut").removeAttribute('hidden');
                    } 
                    else {
                        document.getElementById("signUp").removeAttribute('hidden');
                        document.getElementById("logIn").removeAttribute('hidden');
                         document.getElementById("logOut").setAttribute('hidden', 'true');
                      }
                });
            }
            
             function showLogIn(){
                 document.getElementById("logInSection").removeAttribute('hidden');
             }
            function showSignUp(){
                 document.getElementById("signUpSection").removeAttribute('hidden');
             }
            
            function logOut() {
                firebase.auth().signOut().then(function() {
                      alert("Successful sign out");
                    }).catch(function(error) {
                      alert("An error occured");    
                });
            }
        </script>
    </body>
</html>